<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../css/pmag.css" type="text/css" />
</head>
<body>
<div id="header_wrap">
   <h1><a href="https://www.facebook.com/groups/programmerMagazine">程式人雜誌</a> <sub> --  <a href="https://dl.dropbox.com/u/101584453/pmag/201402/htm/home.html">2014 年 2 月號</a> (開放公益出版品)</sub></h1>
</div>
<div id="content">
<div id="TOC">
<ul>
<li><a href="#arduino入門教學14-以-amarino-連接-android-與-arduino-作者cooper-maa">Arduino入門教學(14) – 以 Amarino 連接 Android 與 Arduino (作者：Cooper Maa)</a></li>
</ul>
</div>
<h2 id="arduino入門教學14-以-amarino-連接-android-與-arduino-作者cooper-maa"><a href="#arduino入門教學14-以-amarino-連接-android-與-arduino-作者cooper-maa">Arduino入門教學(14) – 以 Amarino 連接 Android 與 Arduino (作者：Cooper Maa)</a></h2>
<p>編輯說明：<a href="http://www.amarino-toolkit.net/">Amarino</a> 是 Android meets Arduino 的縮寫， 可以用 Android 手機來控制 Arduino 裝置，以下連結有 Cooper Maa 對 Amarino 的投影片介紹。</p>
<ul>
<li><a href="http://coopermaa2nd.blogspot.tw/2012/07/getting-started-with-amarino.html">Getting Started with Amarino 簡報</a></li>
</ul>
<p>這篇說明如何以 Amarino 通過藍芽連接 Android 與 Arduino，可作為 Amarino 入門的第一步</p>
<h3 id="所需材料"><a href="#所需材料">所需材料</a></h3>
<ul>
<li>Android 手機一支</li>
<li>Arduino x1</li>
<li>bluetooth module x 1</li>
</ul>
<h3 id="step-1安裝-amarino"><a href="#step-1安裝-amarino">Step 1：安裝 Amarino</a></h3>
<p>到 <a href="http://www.amarino-toolkit.net/">http://www.amarino-toolkit.net/</a> 下載底下兩個 App 並安裝到 Android 手機上：</p>
<ol style="list-style-type: decimal">
<li><p><a href="http://code.google.com/p/amarino/downloads/detail?name=Amarino_2_v0_55.apk&amp;can=2&amp;q=">Amarino</a></p></li>
<li><p><a href="http://code.google.com/p/amarino/downloads/detail?name=AmarinoPluginBundle.apk&amp;can=2&amp;q=">Amarino Plug-in Bundle</a></p></li>
</ol>
<h3 id="step-2-安裝-arduino-ide-與-meetandroid-library"><a href="#step-2-安裝-arduino-ide-與-meetandroid-library">Step 2: 安裝 Arduino IDE 與 MeetAndroid Library</a></h3>
<p>如果你電腦上還沒有 Arduino IDE，請先到 <a href="http://arduino.cc/en/Main/Software">http://arduino.cc/en/Main/Software</a> 下載軟體，下載後解壓縮即可。</p>
<p>接著下載 <a href="http://code.google.com/p/amarino/downloads/detail?name=MeetAndroid_4.zip&amp;can=2&amp;q=">MeetAndroid Library</a> ，把 MeetAndroid 解到 Arduino IDE 安裝目錄的 libraries 資料夾下。</p>
<p>重新啟動 Arduino IDE，然後在 Sketch &gt; Import Library 底下應該會看到 MeetAndroid，如下圖：</p>
<div class="figure">
<img src="../img/Armarino1.png" />
</div>
<h3 id="step-3-上傳-test-程式"><a href="#step-3-上傳-test-程式">Step 3： 上傳 Test 程式</a></h3>
<p>點 File &gt; Examples &gt; MeetAndroid &gt; Test 打開 Test 程式：</p>
<div class="figure">
<img src="../img/Armarino2.png" />
</div>
<p>Test 程式所用的 baud rate 預設是 57600 bps，如果你的藍芽模組不是 57600 bps，請做適當的調整：</p>
<div class="figure">
<img src="../img/Armarino3.png" />
</div>
<p>然後把程式上傳到 Arduino 板子上。</p>
<h3 id="step-4連接藍芽模組"><a href="#step-4連接藍芽模組">Step 4：連接藍芽模組</a></h3>
<p>我用的是 <a href="http://www.wavesen.com/">廣州匯承信息科技</a> 的 HC-0x 系列藍芽模組，下圖是 HC-0x 藍芽模組的外觀：</p>
<div class="figure">
<img src="../img/Armarino4.jpg" />
</div>
<p>▲ HC-0x 藍芽模組 (圖左：正面圖，圖右：背面圖）</p>
<p>這個藍芽模組連接方法很簡單，只要照下表把 Arduino 和藍芽模組連接起來就好：</p>
<table>
<thead>
<tr class="header">
<th align="left">Arduino</th>
<th align="left">藍芽模組</th>
<th align="left">備註</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">5V</td>
<td align="left">VCC</td>
<td align="left">注意電源不可接錯</td>
</tr>
<tr class="even">
<td align="left">GND</td>
<td align="left">GND</td>
<td align="left">注意電源不可接錯</td>
</tr>
<tr class="odd">
<td align="left">RXD</td>
<td align="left">TXD</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">TXD</td>
<td align="left">RXD</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="figure">
<img src="../img/Armarino5.png" />
</div>
<p>連接的時候有兩點要注意：第一是電源千萬不可接錯，不然藍芽模組可能會壞掉，第二是 Arduino 的 RXD 要接藍芽模組的 TXD，而 Arduino 的 TXD 要接藍芽模組的 RXD。</p>
<p>通電之後，藍芽模組上的 LED 會一直閃爍：</p>
<div class="figure">
<img src="../img/Armarino6.png" />
</div>
<h3 id="step-5測試連線"><a href="#step-5測試連線">Step 5：測試連線</a></h3>
<p>打開 Android 手機上的 Amarino App，點擊【Add BT Device】（如下圖左）搜尋藍芽設備，如果藍芽模組有正確安裝，便會出現在列表中（如下圖右）：</p>
<div class="figure">
<img src="../img/Armarino7.jpg" />
</div>
<p>點選找到的藍芽設備，接著會進到設備列表：</p>
<div class="figure">
<img src="../img/Armarino8.png" />
</div>
<p>點一下上圖紅框框起來的圖示，接著點【Add Event】（如下圖左）顯示可用的 Events，然後點選【Test Event】（如下圖右）：</p>
<div class="figure">
<img src="../img/Armarino9.jpg" />
</div>
<p>進入設定頁面後，直接點下面的【Save】鈕（如下圖左），此時藍芽設備已增加了一個 Test Event，如下圖右：</p>
<div class="figure">
<img src="../img/Armarino10.jpg" />
</div>
<p>按下手機 Back 鍵回到設備列表畫面（如下圖左），點選【Connect】鈕跟 Arduino 連線，如果是第一次與此藍芽設備連線，Android 手機會出現「藍芽配對要求」的畫面，必須輸入配對密碼（一般為 0000 或 1234）才能與此藍芽設備連線（如下圖右）：</p>
<div class="figure">
<img src="../img/Armarino11.jpg" />
</div>
<p>如果成功建立連線（如下圖），Amarino 便會每隔 3 秒發送一個數值介於 0 到 255 的 random number 給 Arduino，假如 Arduino 上的 LED 燈號（在 pin 13 上）會每隔 3 秒閃爍一下，那麼恭禧你，因為你的 Android 手機已經成功和 Arduino 建立通訊了。</p>
<div class="figure">
<img src="../img/Armarino12.png" />
</div>
<p>如果想知道 Amarino 背景在做什麼，可以點選【Monitoring】鈕以觀察背後的通訊過程：</p>
<div class="figure">
<img src="../img/Armarino13.png" />
</div>
<h3 id="參考資料"><a href="#參考資料">參考資料</a></h3>
<ul>
<li><a href="http://www.amarino-toolkit.net/index.php/getting-started.html">How to connect my phone to Arduino in 10 steps</a></li>
<li><a href="http://www.chetanpatil.info/1/post/2011/12/android-talking-to-arduino.html">Android talking to Arduino</a></li>
</ul>
<p>【本文作者為馬萬圳，原文網址為： <a href="http://coopermaa2nd.blogspot.tw/2012/06/amarino-android-arduino.html">http://coopermaa2nd.blogspot.tw/2012/06/amarino-android-arduino.html</a> ，由陳鍾誠編輯後納入本雜誌】</p>
</div>
<div id="footer">
<a href="https://www.facebook.com/groups/programmerMagazine/">程式人雜誌</a> ，採用 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/ ">創作共用：姓名標示、相同方式分享</a> 授權，歡迎加入 <a href="https://www.facebook.com/groups/programmerMagazine/">雜誌社團</a>
</div>
</body>
</html>
